## IoT.PaaS || 私有云语境下，我们如何实现高可用和弹性伸缩？

原创： 小A君 [研华智能地球](javascript:void(0);) *8月23日*

自我们开始私有云专题以来，就不断收到小伙伴们的反馈。小A整理收集了大家的需求及开发过程中遇到的问题。趁今天这期内容，我们就以问答的形式为大家一一作答。





> 01 自己购买软件，成本实在太高！**如何满足高可用性需求呢？**



## **▌▌** **用户痛点：** **难以承受高昂的价格**



为了确保系统的高效运行，部分客户目前的做法是购买软件，并且至少需要两套一模一样的硬件做redundancy才能够保证运行的可靠性。这样的一套软件价格昂贵，至少需要200万，是大部分客户无法承受的。



## **▌▌** **WISE-PaaS私有云：** **基于Cloud Foundry，高可用零宕机**



WISE-PaaS 私有云是一套纯属私人拥有，建立在客户企业内部的云平台。除了硬件跟运算资源虚拟化外，我们已把高可用性的机制建置在我们的系统中。

基于Cloud Foundry，WISE-PaaS私有云提供给用户快速创建、部署和管理云端应用程序的能力。同时提供多层次的故障安全和服务体系结构，确保即使是在软件和硬件系统升级过程中也能提供服务。

在服务层，WISE-PaaS以副本集架构进行部署，保障故障发生时可顺利备援到另一个节点；在应用层，用户可以将应用开成多个实例以确保无单点故障——每个应用实例会在不同的容器中运行，即使某个实例出现故障，其它实例也可以提供持续的服务。





> 02每次要增加资源配置，就要重新部署，费时不说，还浪费！**能否满足弹性伸缩的需要呢**？





## **▌▌** **用户痛点：** **传统VM架构，会耗费更多资源**



在传统的企业应用部署中，开发人员一般很难构建可伸缩的应用服务。以Virtual Machines（VM）的模式来说，切割好的VM就不能改变，如果您需要增减VM空间，就必须停止服务重新布署，费时费力的同时，使用者永远都面临空间不够或是资源浪费的状况。



## ▌▌ WISE-PaaS私有云： 使用container架构，支持弹性伸缩



从管理成本的角度出发，使用VM架构所需的硬件资源较大，所以WISE-PaaS是采用现在最热门且已达到工业等级稳定性的container架构。



![img](assets/640-1542254163257)

**VM和Containers的差别↑↑↑**(图片来源：Serverpronto University website)



WISE-PaaS 使用container 架构，只需分配运算资源给使用者就好，使用者用超过或是不须那么多空间的时候都可以在运行的情况下通过管理界面做调整。

其不仅支持增加设备向外扩展, 还能在用户需求的范围内进行计算资源的缩放。不需要购买过多硬件，就能通过简易扩增运算能量方式让使用者感觉系统具有无限的计算资源。同时，缩放均可在不干扰正常系统运行进程的情况下进行。

同时，通过使WISE-PaaS/EnSaaS 上的 Metering 功能，还能轻易追踪到每个使用者用了多少资源，调整优化平台资源利用。



![img](assets/640-1542254270912)

**WISE-PaaS计量服务↑↑↑**





> 03账户管理麻烦，谁能访问云中的资源？能访问到哪些资源？这都是需要设置考虑的，那么**如何灵活设置不同租户的权限空间**？





## **▌▌** **用户痛点：** **账户管理麻烦，耗时费力**



账户管理的成本也是无法忽略的难点。要想针对每个APP跟每个VM空间作账户管理，用户就需要耗费很大的资源去设计开发出一套完善的管理机制。



## **▌▌** **WISE-PaaS私有云：** **单点登录，多租户管理**



研华WISE-PaaS提供单点登录（Single Sign On，简称SSO）服务。利用SSO，您可以通过身份管理和策略管理控制账号下有哪些资源的操作权限，并让使用者登录一次便能使用所有平台上资源包含应用及服务。

也就是说，您可以很容易地针对“组织”及“用户”设定可用的运算资源、开发工具及可连结的数据库。并且很容易做多层级的管理，让开发更有弹性。

[**\*点击阅读 “细说研华 SSO 单点登录”***](http://mp.weixin.qq.com/s?__biz=MzAwNDE5ODI5NQ==&mid=2658802187&idx=1&sn=5b2a60a3ed8382eee8065e40d9da5e27&chksm=80a120f3b7d6a9e557a7643a75c461c65bdb41db94ed2bae55d47029d4a20eaa7dc4ccb3c47d&scene=21#wechat_redirect)



![img](assets/640-1542254313501)

**多租户范例：一个公司的组织与独立空间示意图↑↑↑**

![img](assets/640-1542254371070)

**管理者依组织及职等轻松管理多租户↑↑↑** (图片来源：Asimio Tech)







> 04传输资料，往往要耗时很久，还会遇到资源空间被占据的情况！**要如何有效地管理资源的传输和效率呢**？





## **▌▌** **用户痛点：** **传统的资源接收方式，不利管理**



用户有大量的数据资源需要上传到服务器。传统服务器接收资料的过程中，面临很大的风险：耗时长不说，面对百万等级的连线，管理上也非常困难。如果所有数据都实时传到云端，而不做任何的预处理，就会占据太多的资源空间。用户如果想要自己开发完成负载均衡及分散式运算的设计，就需要耗费相当高的人力和成本。



## **▌▌** **WISE-PaaS私有云：** **IoT Hub，节省开发人力**



研华私有云提供一款很好的中央开发工具——IoT Hub，使用者就不需要自行开发资料传输的功能，有效节省了人力。IoT Hub提供SaaS方案与边缘装置间的信息发送与接收功能，并且支持多种协定：AMQP、MQTT、MOTT Over WebSocket等。



![img](assets/640-1542254462100)



依靠这样一种高可靠、高效能的Cluster架构，研华提供共享型与专属型服务层级，以设备或连线为单位提供专属通道进行资料隔离。租户可以自行管理或连线通道，分配传输资源。





![img](assets/640-1542254488669)





除了运算资源及平台管理外，PaaS很重要的一点就是提供给使用者开发工具与运行环境，让客户可以快速地应用运转。

研华WISE-PaaS 是我们特别为工业物联网及AI应用设计的，因此我们还特别提供数据可视化（Dashboard）、人工智能学习以及端点部属工具让使用者大幅减少写程序的时间，快速尝试机器学习模型，从快速尝试中发掘有效益及可在线运行的人工智能方案。

